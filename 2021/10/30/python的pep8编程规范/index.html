<!DOCTYPE html><html lang="zh-cmn-Hans" prefix="og: http://ogp.me/ns#" class="han-init"><head><meta charset="utf-8"><meta http-equiv="X-UA-Compatible" content="IE=edge"><meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=1" /><title>PEP8 python编程规范 &mdash; 晚风</title><link rel="stylesheet" href="https://onefeng.github.io/assets/vendor/primer-css/css/primer.css"><link rel="stylesheet" href="https://onefeng.github.io/assets/css/components/collection.css"><link rel="stylesheet" href="https://onefeng.github.io/assets/css/components/repo-card.css"><link rel="stylesheet" href="https://onefeng.github.io/assets/css/sections/repo-list.css"><link rel="stylesheet" href="https://onefeng.github.io/assets/css/components/boxed-group.css"><link rel="stylesheet" href="https://onefeng.github.io/assets/css/globals/common.css"><link rel="stylesheet" href="https://onefeng.github.io/assets/css/globals/responsive.css"><link rel="stylesheet" href="https://onefeng.github.io/assets/css/posts/index.css"><link rel="stylesheet" href="https://onefeng.github.io/assets/vendor/octicons/octicons/octicons.css"><link rel="stylesheet" href="https://onefeng.github.io/assets/css/globals/github.css"><link rel="canonical" href="https://onefeng.github.io/2021/10/30/python%E7%9A%84pep8%E7%BC%96%E7%A8%8B%E8%A7%84%E8%8C%83/"><link rel="alternate" type="application/atom+xml" title="晚风" href="https://onefeng.github.io/feed.xml"><link rel="shortcut icon" href="https://onefeng.github.io/favicon.ico"><meta property="og:title" content="PEP8 python编程规范"><meta name="keywords" content="python"><meta name="og:keywords" content="python"><meta name="description" content="本文主要介绍python的编程规范"><meta name="og:description" content="本文主要介绍python的编程规范"><meta property="og:url" content="https://onefeng.github.io/2021/10/30/python%E7%9A%84pep8%E7%BC%96%E7%A8%8B%E8%A7%84%E8%8C%83/"><meta property="og:site_name" content="晚风"><meta property="og:type" content="article"><meta property="og:locale" content="zh_CN" /><meta property="article:published_time" content="2021-10-30"> <script src="https://onefeng.github.io/assets/vendor/jquery/dist/jquery.min.js"></script> <script src="https://onefeng.github.io/assets/js/jquery-ui.js"></script> <script src="https://onefeng.github.io/assets/js/main.js"></script></head><body class="" data-mz=""><header class="site-header"><div class="container"><h1><a href="https://onefeng.github.io/" title="晚风"><span class="octicon octicon-mark-github"></span> 晚风</a></h1><button class="collapsed mobile-visible" type="button" onclick="toggleMenu();"> <span class="icon-bar"></span> <span class="icon-bar"></span> <span class="icon-bar"></span> </button><nav class="site-header-nav" role="navigation"> <a href="https://onefeng.github.io/" class=" site-header-nav-item" target="" title="首页">首页</a> <a href="https://onefeng.github.io/tags/" class=" site-header-nav-item" target="" title="标签">标签</a> <a href="https://onefeng.github.io/categories/" class=" site-header-nav-item" target="" title="分类">分类</a> <a href="https://onefeng.github.io/archives/" class=" site-header-nav-item" target="" title="归档">归档</a> <a href="https://onefeng.github.io/wiki/" class=" site-header-nav-item" target="" title="维基">维基</a> <a href="https://onefeng.github.io/about/" class=" site-header-nav-item" target="" title="关于">关于</a></nav></div><link href="https://cdn.jsdelivr.net/npm/fancybox/dist/css/jquery.fancybox.css" rel="stylesheets" /></header><section class="collection-head small geopattern" data-pattern-id="PEP8 python编程规范"><div class="container"><div class="columns"><div class="column three-fourths"><div class="collection-title"><h1 class="collection-header">PEP8 python编程规范</h1><div class="collection-info"> <span class="meta-info"> <span class="octicon octicon-calendar"></span> 2021/10/30 </span> <span class="meta-info"> <span class="octicon octicon-file-directory"></span> <a href="https://onefeng.github.io/tags/#python" title="python">python</a> </span> <span class="meta-info"> <span class="octicon octicon-clock"></span> 共 6173 字，约 18 分钟 </span></div></div></div></div></div></section><section class="container content"><div class="columns"><div class="column three-fourths" ><article class="article-content markdown-body"><p>本文主要介绍python的编程规范</p><h2 id="编码风格">编码风格</h2><p>Guido的一个重要观点是代码被读的次数远多于被写的次数。pep8主要用于保持编写的Python代码风格一致，但是很多三方库的大佬也没有完全遵守这套规范（可能是历史原因造成需要和之前的代码保持一致）。 但是绝大多数情况下，作为开发者一定要遵守这些规范，只有这样代码可读性更强也能为开源社区贡献自己的力量。<br /> idea基本上能很大程度规范我们的代码，下面主要介绍代码的布局及规范的具体操作。</p><h2 id="代码布局">代码布局</h2><h3 id="缩进">缩进</h3><p>每个缩进级别采用4个空格。</p><p>续行有两种方式：隐式续行（垂直对齐于圆括号、方括号和花括号），悬挂缩进（第一行不应该包括参数，并且在续行中需要再缩进一级以便清楚表示）。<br /> 正确的例子：</p><div class="language-python highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="c1"># 隐式续行 同开始分界符(左括号)对齐
</span><span class="n">foo</span> <span class="o">=</span> <span class="n">long_function_name</span><span class="p">(</span><span class="n">var_one</span><span class="p">,</span> <span class="n">var_two</span><span class="p">,</span>
                         <span class="n">var_three</span><span class="p">,</span> <span class="n">var_four</span><span class="p">)</span>

<span class="c1"># 续行多缩进一级以同其他代码区别
</span><span class="k">def</span> <span class="nf">long_function_name</span><span class="p">(</span>
        <span class="n">var_one</span><span class="p">,</span> <span class="n">var_two</span><span class="p">,</span> <span class="n">var_three</span><span class="p">,</span>
        <span class="n">var_four</span><span class="p">):</span>
    <span class="k">print</span><span class="p">(</span><span class="n">var_one</span><span class="p">)</span>

</code></pre></div></div><p>错误的例子：</p><div class="language-python highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="c1"># 隐式续行 没有同开始分界符(左括号)对齐
</span><span class="n">foo</span> <span class="o">=</span> <span class="n">long_function_name</span><span class="p">(</span><span class="n">var_one</span><span class="p">,</span> <span class="n">var_two</span><span class="p">,</span>
    <span class="n">var_three</span><span class="p">,</span> <span class="n">var_four</span><span class="p">)</span>

<span class="c1"># 续行并没有被区分开，需要再缩进一级
</span><span class="k">def</span> <span class="nf">long_function_name</span><span class="p">(</span>
    <span class="n">var_one</span><span class="p">,</span> <span class="n">var_two</span><span class="p">,</span> <span class="n">var_three</span><span class="p">,</span>
    <span class="n">var_four</span><span class="p">):</span>
    <span class="k">print</span><span class="p">(</span><span class="n">var_one</span><span class="p">)</span>
</code></pre></div></div><p>对于续行来说，4空格的规则可以不遵守。</p><div class="language-python highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="c1"># 悬挂缩进可以不采用4空格的缩进方法。
</span><span class="n">foo</span> <span class="o">=</span> <span class="n">long_function_name</span><span class="p">(</span>
  <span class="n">var_one</span><span class="p">,</span> <span class="n">var_two</span><span class="p">,</span>
  <span class="n">var_three</span><span class="p">,</span> <span class="n">var_four</span><span class="p">)</span>
</code></pre></div></div><h3 id="每行最大长度">每行最大长度</h3><p>将所有行都限制在79个字符长度以内。当代码仅仅只由一个团队维护时，可以达成一致让行长度增加到80到100字符(实际上最大行长是99字符)，注释和文档字符串仍然是以72字符换行。</p><h3 id="二元运算符之前还是之后换行">二元运算符之前还是之后换行？</h3><p>长期以来一直推荐的风格是在二元运算符之后换行。但是这样会影响代码可读性，包括两个方面：一是运算符会分散在屏幕上的不同列上，二是每个运算符会留在前一行并远离操作数。所以，阅读代码的时候眼睛必须做更多的工作来确定哪些操作数被加，哪些操作数被减：</p><div class="language-python highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="c1"># 错误的例子：运算符远离操作数
</span><span class="n">income</span> <span class="o">=</span> <span class="p">(</span><span class="n">gross_wages</span> <span class="o">+</span>
          <span class="n">taxable_interest</span> <span class="o">+</span>
          <span class="p">(</span><span class="n">dividends</span> <span class="o">-</span> <span class="n">qualified_dividends</span><span class="p">)</span> <span class="o">-</span>
          <span class="n">ira_deduction</span> <span class="o">-</span>
          <span class="n">student_loan_interest</span><span class="p">)</span>
</code></pre></div></div><div class="language-python highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="c1"># 正确的例子：更容易匹配运算符与操作数
</span><span class="n">income</span> <span class="o">=</span> <span class="p">(</span><span class="n">gross_wages</span>
          <span class="o">+</span> <span class="n">taxable_interest</span>
          <span class="o">+</span> <span class="p">(</span><span class="n">dividends</span> <span class="o">-</span> <span class="n">qualified_dividends</span><span class="p">)</span>
          <span class="o">-</span> <span class="n">ira_deduction</span>
          <span class="o">-</span> <span class="n">student_loan_interest</span><span class="p">)</span>
</code></pre></div></div><h3 id="空行">空行</h3><p>使用2个空行来分隔最外层的函数(function)和类(class)定义。<br /> 使用1个空行来分隔类中的方法(method)定义。<br /> 可以使用额外的空行（尽量少）来分隔一组相关的函数。在一系列相关的仅占一行的函数之间，空行也可以被省略（比如一组虚函数定义）。<br /> 在函数内使用空行（尽量少）使代码逻辑更清晰。</p><h3 id="模块引用">模块引用</h3><p>Imports应该分行写，而不是都写在一行，例如：</p><div class="language-python highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="c1"># 分开写
</span><span class="kn">import</span> <span class="nn">os</span>
<span class="kn">import</span> <span class="nn">sys</span>
<span class="c1"># 不要像下面一样写在一行
</span><span class="kn">import</span> <span class="nn">sys</span><span class="p">,</span> <span class="n">os</span>
</code></pre></div></div><p>这样写也是可以的：</p><div class="language-python highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="kn">from</span> <span class="nn">subprocess</span> <span class="kn">import</span> <span class="n">Popen</span><span class="p">,</span> <span class="n">PIPE</span>
</code></pre></div></div><p>Imports应该写在代码文件的开头，位于模块(module)注释和文档字符串(docstring)之后，模块全局变量(globals)和常量(constants)声明之前。</p><p>Imports应该按照下面的顺序分组来写：</p><p>1.标准库imports</p><p>2.相关第三方imports</p><p>3.本地应用/库的特定imports</p><p>不同组的imports之前用空格隔开。</p><p>推荐使用绝对(absolute)imports，因为这样通常更易读，在import系统没有正确配置（比如中的路径以sys.path结束）的情况下，也会有更好的表现（或者至少会给出错误信息）：</p><div class="language-python highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="kn">import</span> <span class="nn">mypkg.sibling</span>
<span class="kn">from</span> <span class="nn">mypkg</span> <span class="kn">import</span> <span class="n">sibling</span>
<span class="kn">from</span> <span class="nn">mypkg.sibling</span> <span class="kn">import</span> <span class="n">example</span>
</code></pre></div></div><p>然而，除了绝对imports，显式的相对imports也是一种可以接受的替代方式。特别是当处理复杂的包布局(package layouts)时，采用绝对imports会显得啰嗦。</p><div class="language-python highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="kn">from</span> <span class="nn">.</span> <span class="kn">import</span> <span class="n">sibling</span>
<span class="kn">from</span> <span class="nn">.sibling</span> <span class="kn">import</span> <span class="n">example</span>
</code></pre></div></div><p>避免使用通配符imports(from <module> import *)，因为会造成在当前命名空间出现的命名含义不清晰，给读者和许多自动化工具造成困扰。有一个可以正当使用通配符import的情形，即将一个内部接口重新发布成公共API的一部分（比如，使用备选的加速模块中的定义去覆盖纯Python实现的接口，预先无法知晓具体哪些定义将被覆盖）。</module></p><h3 id="模块级的双下划线命名">模块级的双下划线命名</h3><p>模块中的“双下滑线”（变量名以两个下划线开头，两个下划线结尾）变量，比如__all__，__author，__version__等，应该写在文档字符串(docstring)之后，除了form __future__引用(imports)的任何其它类型的引用语句之前。Python要求模块中__future__的导入必须出现在除文档字符串(docstring)之外的任何其他代码之前。</p><div class="language-python highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="s">"""This is the example module.

This module does stuff.
"""</span>

<span class="kn">from</span> <span class="nn">__future__</span> <span class="kn">import</span> <span class="n">barry_as_FLUFL</span>

<span class="n">__all__</span> <span class="o">=</span> <span class="p">[</span><span class="s">'a'</span><span class="p">,</span> <span class="s">'b'</span><span class="p">,</span> <span class="s">'c'</span><span class="p">]</span>
<span class="n">__version__</span> <span class="o">=</span> <span class="s">'0.1'</span>
<span class="n">__author__</span> <span class="o">=</span> <span class="s">'Cardinal Biggles'</span>

<span class="kn">import</span> <span class="nn">os</span>
<span class="kn">import</span> <span class="nn">sys</span>
</code></pre></div></div><h3 id="字符串引用">字符串引用</h3><p>在Python中表示字符串时，不管用单引号还是双引号都是一样的。但是不推荐将这两种方式看作一样并且混用。最好选择一种规则并坚持使用。当字符串中包含单引号时，采用双引号来表示字符串，反之也是一样，这样可以避免使用反斜杠，代码也更易读。</p><h3 id="表达式和语句中的空格">表达式和语句中的空格</h3><p>在下列情形中避免使用过多的空白：</p><ul><li>方括号，圆括号和花括号之后：</li></ul><div class="language-python highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="c1">#正确的例子:
</span><span class="n">spam</span><span class="p">(</span><span class="n">ham</span><span class="p">[</span><span class="mi">1</span><span class="p">],</span> <span class="p">{</span><span class="n">eggs</span><span class="p">:</span> <span class="mi">2</span><span class="p">})</span>

<span class="c1">#错误的例子：
</span><span class="n">spam</span><span class="p">(</span> <span class="n">ham</span><span class="p">[</span> <span class="mi">1</span> <span class="p">],</span> <span class="p">{</span> <span class="n">eggs</span><span class="p">:</span> <span class="mi">2</span> <span class="p">}</span> <span class="p">)</span>
</code></pre></div></div><ul><li>逗号，分号或冒号之前：</li></ul><div class="language-python highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="c1">#正确的例子:
</span><span class="k">if</span> <span class="n">x</span> <span class="o">==</span> <span class="mi">4</span><span class="p">:</span> <span class="k">print</span> <span class="n">x</span><span class="p">,</span> <span class="n">y</span><span class="p">;</span> <span class="n">x</span><span class="p">,</span> <span class="n">y</span> <span class="o">=</span> <span class="n">y</span><span class="p">,</span> <span class="n">x</span>

<span class="c1">#错误的例子:
</span><span class="k">if</span> <span class="n">x</span> <span class="o">==</span> <span class="mi">4</span> <span class="p">:</span> <span class="k">print</span> <span class="n">x</span> <span class="p">,</span> <span class="n">y</span> <span class="p">;</span> <span class="n">x</span> <span class="p">,</span> <span class="n">y</span> <span class="o">=</span> <span class="n">y</span> <span class="p">,</span> <span class="n">x</span>
</code></pre></div></div><ul><li>不过，在切片操作时，冒号和二元运算符是一样的，应该在其左右两边保留相同数量的空格（就像对待优先级最低的运算符一样）。在扩展切片操作中，所有冒号的左右两边空格数都应该相等。不过也有例外，当切片操作中的参数被省略时，应该也忽略空格。</li></ul><div class="language-python highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="c1">#正确的例子:
</span><span class="n">ham</span><span class="p">[</span><span class="mi">1</span><span class="p">:</span><span class="mi">9</span><span class="p">],</span> <span class="n">ham</span><span class="p">[</span><span class="mi">1</span><span class="p">:</span><span class="mi">9</span><span class="p">:</span><span class="mi">3</span><span class="p">],</span> <span class="n">ham</span><span class="p">[:</span><span class="mi">9</span><span class="p">:</span><span class="mi">3</span><span class="p">],</span> <span class="n">ham</span><span class="p">[</span><span class="mi">1</span><span class="p">::</span><span class="mi">3</span><span class="p">],</span> <span class="n">ham</span><span class="p">[</span><span class="mi">1</span><span class="p">:</span><span class="mi">9</span><span class="p">:]</span>
<span class="n">ham</span><span class="p">[</span><span class="n">lower</span><span class="p">:</span><span class="n">upper</span><span class="p">],</span> <span class="n">ham</span><span class="p">[</span><span class="n">lower</span><span class="p">:</span><span class="n">upper</span><span class="p">:],</span> <span class="n">ham</span><span class="p">[</span><span class="n">lower</span><span class="p">::</span><span class="n">step</span><span class="p">]</span>
<span class="n">ham</span><span class="p">[</span><span class="n">lower</span><span class="o">+</span><span class="n">offset</span> <span class="p">:</span> <span class="n">upper</span><span class="o">+</span><span class="n">offset</span><span class="p">]</span>
<span class="n">ham</span><span class="p">[:</span> <span class="n">upper_fn</span><span class="p">(</span><span class="n">x</span><span class="p">)</span> <span class="p">:</span> <span class="n">step_fn</span><span class="p">(</span><span class="n">x</span><span class="p">)],</span> <span class="n">ham</span><span class="p">[::</span> <span class="n">step_fn</span><span class="p">(</span><span class="n">x</span><span class="p">)]</span>
<span class="n">ham</span><span class="p">[</span><span class="n">lower</span> <span class="o">+</span> <span class="n">offset</span> <span class="p">:</span> <span class="n">upper</span> <span class="o">+</span> <span class="n">offset</span><span class="p">]</span>

<span class="c1">#错误的例子:
</span><span class="n">ham</span><span class="p">[</span><span class="n">lower</span> <span class="o">+</span> <span class="n">offset</span><span class="p">:</span><span class="n">upper</span> <span class="o">+</span> <span class="n">offset</span><span class="p">]</span>
<span class="n">ham</span><span class="p">[</span><span class="mi">1</span><span class="p">:</span> <span class="mi">9</span><span class="p">],</span> <span class="n">ham</span><span class="p">[</span><span class="mi">1</span> <span class="p">:</span><span class="mi">9</span><span class="p">],</span> <span class="n">ham</span><span class="p">[</span><span class="mi">1</span><span class="p">:</span><span class="mi">9</span> <span class="p">:</span><span class="mi">3</span><span class="p">]</span>
<span class="n">ham</span><span class="p">[</span><span class="n">lower</span> <span class="p">:</span> <span class="p">:</span> <span class="n">upper</span><span class="p">]</span>
<span class="n">ham</span><span class="p">[</span> <span class="p">:</span> <span class="n">upper</span><span class="p">]</span>
</code></pre></div></div><ul><li>在调用函数时传递参数list的括号之前：</li></ul><div class="language-python highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="c1">#正确的例子:
</span><span class="n">spam</span><span class="p">(</span><span class="mi">1</span><span class="p">)</span>

<span class="c1">#错误的例子:
</span><span class="n">pam</span> <span class="p">(</span><span class="mi">1</span><span class="p">)</span>
</code></pre></div></div><ul><li>在索引和切片操作的左括号之前：</li></ul><div class="language-python highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="c1">#正确的例子:
</span><span class="n">dct</span><span class="p">[</span><span class="s">'key'</span><span class="p">]</span> <span class="o">=</span> <span class="n">lst</span><span class="p">[</span><span class="n">index</span><span class="p">]</span>

<span class="c1">#错误的例子:
</span><span class="n">dct</span> <span class="p">[</span><span class="s">'key'</span><span class="p">]</span> <span class="o">=</span> <span class="n">lst</span> <span class="p">[</span><span class="n">index</span><span class="p">]</span>
</code></pre></div></div><ul><li>赋值(或其他)运算符周围使用多个空格来和其他语句对齐：</li></ul><div class="language-python highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="c1">#正确的例子:
</span><span class="n">x</span> <span class="o">=</span> <span class="mi">1</span>
<span class="n">y</span> <span class="o">=</span> <span class="mi">2</span>
<span class="n">long_variable</span> <span class="o">=</span> <span class="mi">3</span>

<span class="c1">#错误的例子:
</span><span class="n">x</span>             <span class="o">=</span> <span class="mi">1</span>
<span class="n">y</span>             <span class="o">=</span> <span class="mi">2</span>
<span class="n">long_variable</span> <span class="o">=</span> <span class="mi">3</span>
</code></pre></div></div><h3 id="注释">注释</h3><p>和代码矛盾的注释还不如没有。当代码有改动时，一定要优先更改注释使其保持最新。</p><h4 id="块注释">块注释</h4><p>块注释一般写在对应代码之前，并且和对应代码有同样的缩进级别。块注释的每一行都应该以#和一个空格开头（除非该文本是在注释内缩进对齐的）。</p><p>块注释中的段落应该用只含有单个#的一行隔开。</p><h4 id="行内注释">行内注释</h4><p>尽量少用行内注释。 行内注释是和代码语句写在一行内的注释。行内注释应该至少和代码语句之间有两个空格的间隔，并且以#和一个空格开始。</p><h4 id="文档字符串">文档字符串</h4><ul><li><p>所有的公共模块，函数，类和方法都应该有文档字符串。对于非公共方法，文档字符串不是必要的，但你应该留有注释说明该方法的功能，该注释应当出现在def的下一行。</p></li><li><p>多行文档字符串以单行”"”结尾，不能有其他字符，例如：</p></li></ul><div class="language-python highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="s">"""Return a foobang

Optional plotz says to frobnicate the bizbaz first.
"""</span>
</code></pre></div></div><ul><li>对于仅有一行的文档字符串，结尾处的”"”应该也写在这一行。</li></ul><h3 id="命名约定">命名约定</h3><p>Python标准库的命名约定有一些混乱，因此我们永远都无法保持一致。但如今仍然存在一些推荐的命名标准。新的模块和包（包括第三方框架）应该采用这些标准，但若是已经存在的包有另一套风格的话，还是应当与原有的风格保持内部一致。</p><p>对于用户可见的公共部分API，其命名应当表达出功能用途而不是其具体的实现细节。</p><h4 id="描述命名风格">描述：命名风格</h4><p>存在很多不同的命名风格，最好能够独立地从命名对象的用途认出采用了哪种命名风格。</p><ul><li>b (单个小写字母)</li><li>B (单个大写字母)</li><li>lowercase(小写)</li><li>lower_case_with_underscores(带下划线小写)</li><li>UPPERCASE(大写)</li><li>UPPER_CASE_WITH_UNDERSCORES(带下划线大写)</li><li>CapitalizedWords(大驼峰):当CapWords里包含缩写时，将缩写部分的字母都大写。HTTPServerError比HttpServerError要好</li><li>capitalizedWords(小驼峰)</li><li>Capitalized_Words_With_Underscores (这种风格超丑！)</li><li>_single_leading_underscore:以单个下划线开头是”内部使用”的弱标志。 比如， from M import *不会import下划线开头的对象。</li><li>single_trailing_underscore_:以单个下划线结尾用来避免和Python关键词产生冲突。</li><li>__double_leading_underscore:以双下划线开头的风格命名类属性表示触发命名修饰（在FooBar类中，__boo命名会被修饰成_FooBar__boo</li><li><strong>double_leading_and_trailing_underscore__:以双下划线开头和结尾的命名风格表示“魔术”对象或属性，存在于用户控制的命名空间(user-controlled namespaces)里（也就是说，这些命名已经存在，但通常需要用户覆写以实现用户所需要的功能）。 比如， __init</strong>, <strong>import</strong> 或 <strong>file</strong>。请依照文档描述来使用这些命名，千万不要自己发明。</li></ul><h4 id="规范命名约定">规范：命名约定</h4><ul><li>需要避免的命名</li></ul><p>不要使用字符’l’（L的小写的字母），’O’（o大写的字母），或者’I’（i的大写的字母）来作为单个字符的变量名。 在一些字体中，这些字符和数字1和0无法区别开来。比如，当想使用’l’时，使用’L’代替。</p><ul><li>ASCII兼容性</li></ul><p>标准库中使用的标识符必须与ASCII兼容</p><ul><li>包和模块命名</li></ul><p>模块命名应短小，且为全小写。若下划线能提高可读性，也可以在模块名中使用。Python包命名也应该短小，且为全小写，但不应使用下划线。</p><ul><li>类命名</li></ul><p>类命名应该使用驼峰（CapWords）的命名约定。</p><ul><li>类型变量命名</li></ul><p>建议将后缀_co或_contra添加到用于声明相应的协变(covariant)和逆变(contravariant)的行为。例如：</p><div class="language-python highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="kn">from</span> <span class="nn">typing</span> <span class="kn">import</span> <span class="n">TypeVar</span>

<span class="n">VT_co</span> <span class="o">=</span> <span class="n">TypeVar</span><span class="p">(</span><span class="s">'VT_co'</span><span class="p">,</span> <span class="n">covariant</span><span class="o">=</span><span class="bp">True</span><span class="p">)</span>
<span class="n">KT_contra</span> <span class="o">=</span> <span class="n">TypeVar</span><span class="p">(</span><span class="s">'KT_contra'</span><span class="p">,</span> <span class="n">contravariant</span><span class="o">=</span><span class="bp">True</span><span class="p">)</span>
</code></pre></div></div><ul><li>异常命名</li></ul><p>使用CapWords+Error后缀的方式</p><ul><li>全局变量命名</li></ul><p>（在此之前，我们先假定这些变量都仅在同一个模块内使用。）这些约定同样也适用于函数命名。</p><p>对于引用方式设计为from M import *的模块，应该使用__all__机制来避免import全局变量，或者采用下划线前缀的旧约定来命名全局变量，从而表明这些变量是“模块非公开的”。</p><ul><li>函数命名</li></ul><p>函数命名应该都是小写，必要时使用下划线来提高可读性。</p><ul><li>函数和方法参数</li></ul><p>实例方法的第一参数永远都是self。<br /> 类方法的第一个参数永远都是cls。\</p><ul><li>常量</li></ul><p>常量通常是在模块级别定义的，使用全部大写并用下划线将单词分开。如：MAX_OVERFLOW和TOTAL 。</p><h3 id="编程建议">编程建议</h3><ul><li><p>代码应该以不影响其他Python实现（PyPy，Jython，IronPython，Cython，Psyco等）的方式编写。 例如，不要依赖于 CPython 在字符串拼接时的优化实现，像这种语句形式a += b和a = a + b。即使是 CPython（仅对某些类型起作用） 这种优化也是脆弱的，不是在所有的实现中都不使用引用计数。在库中性能敏感的部分，用’‘.join形式来代替。这会确保在所有不同的实现中字符串拼接是线性时间的。</p></li><li><p>与单例作比较，像None应该用is或is not，从不使用==操作符。 同样的，当心if x is not None这样的写法，你是不知真的要判断x不是None。例如，测试一个默认值为None的变量或参数是否设置成了其它值，其它值有可能是某种特殊类型（如容器），这种特殊类型在逻辑运算时其值会被当作Flase来看待。</p></li><li><p>用is not操作符而不是not … is。</p></li><li><p>始终使用def语句来代替直接绑定了一个lambda表达式的赋值语句。</p></li><li><p>异常类应派生自Exception而不是BaseException。直接继承BaseException是为Exception保留的，从BaseException继承并捕获异常这种做法几乎总是错的。</p></li><li><p>捕获异常时，尽可能使用明确的异常，而不是用一个空的except:语句。</p></li><li><p>用’‘.startswith()和’‘.endswith()代替字符串切片来检查前缀和后缀。</p></li><li><p>对象类型的比较应该始终使用isinstance()而不是直接比较。</p></li><li><p>对于序列（字符串、列表、元组）来说，空的序列为False：</p></li></ul><div class="language-python highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="c1">#正确写法：
</span><span class="k">if</span> <span class="ow">not</span> <span class="n">seq</span><span class="p">:</span>
<span class="k">if</span> <span class="n">seq</span><span class="p">:</span>
<span class="c1">#错误写法：
</span><span class="k">if</span> <span class="nb">len</span><span class="p">(</span><span class="n">seq</span><span class="p">):</span>
<span class="k">if</span> <span class="ow">not</span> <span class="nb">len</span><span class="p">(</span><span class="n">seq</span><span class="p">):</span>
</code></pre></div></div><ul><li>不要用==比较True和False。</li></ul><div class="language-python highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="c1">#推荐的写法：
</span><span class="k">if</span> <span class="n">greeting</span><span class="p">:</span>

<span class="k">if</span> <span class="ow">not</span> <span class="n">greeting</span><span class="p">:</span>

<span class="c1">#不推荐的写法：
</span><span class="k">if</span> <span class="n">greeting</span> <span class="o">==</span> <span class="bp">True</span><span class="p">:</span>

<span class="c1">#更加不推荐的写法：
</span><span class="k">if</span> <span class="n">greeting</span> <span class="ow">is</span> <span class="bp">True</span><span class="p">:</span>
</code></pre></div></div><div style="margin-top:2em;padding:0 1.5em;border:1px solid #d3d3d3;background-color:#deebf7"><h3>文档信息</h3><ul><li>本文作者：<a href="https://onefeng.github.io" target="_blank">onefeng</a></li><li>本文链接：<a href="https://onefeng.github.io/2021/10/30/python%E7%9A%84pep8%E7%BC%96%E7%A8%8B%E8%A7%84%E8%8C%83/" target="_blank">https://onefeng.github.io/2021/10/30/python%E7%9A%84pep8%E7%BC%96%E7%A8%8B%E8%A7%84%E8%8C%83/</a></li><li>版权声明：自由转载-非商用-非衍生-保持署名（<a href="http://creativecommons.org/licenses/by-nc-nd/3.0/deed.zh" target="_blank">创意共享3.0许可证</a>）</li></ul></div></article><div class="comment"><div id="gitalk-container"></div><link rel="stylesheet" href="https://onefeng.github.io/assets/vendor/gitalk/gitalk.css"> <script src="https://cdn.jsdelivr.net/npm/gitalk@1/dist/gitalk.min.js"></script> <script> var gitalk = new Gitalk({ id: '/2021/10/30/python%E7%9A%84pep8%E7%BC%96%E7%A8%8B%', clientID: '32093df0544328cd07f4', clientSecret: '293fe7853fd4a12eb266c11cf02b775908525ce3', repo: 'onefeng.github.io', owner: 'onefeng', admin: ['onefeng'], labels: ['gitment'], perPage: 50, }); gitalk.render('gitalk-container'); </script></div></div><div class="column one-fourth"><h3>搜索</h3><div id="site_search"> <input style="width:96%" type="text" id="search_box" placeholder=""></div><ul id="search_results" style="font-size:14px;list-style-type:none;padding-top:10px;padding-left:10px;"></ul><script src="https://onefeng.github.io/assets/js/simple-jekyll-search.min.js"></script> <script type="text/javascript"> SimpleJekyllSearch({ searchInput: document.getElementById('search_box'), resultsContainer: document.getElementById('search_results'), json: '/assets/search_data.json?v=1669427876', searchResultTemplate: '<li><a href="{url}" title="{title}">{title}</a></li>', noResultsText: '没有搜索到...', limit: 10, fuzzy: false, exclude: ['Welcome'] }) </script><h3 class="post-directory-title mobile-hidden">内容</h3><div id="post-directory-module" class="mobile-hidden"><section class="post-directory"><dl></dl></section></div><script src="https://onefeng.github.io/assets/js/jquery.toc.js"></script></div></div></section><footer class="container"><div class="site-footer" role="contentinfo"><div class="copyright left mobile-block"> © 2020 <span title="onefeng">onefeng</span> <a href="javascript:window.scrollTo(0,0)" class="right mobile-visible">TOP</a></div><ul class="site-footer-links right mobile-hidden"><li> <a href="javascript:window.scrollTo(0,0)" >TOP</a></li></ul><a href="https://github.com/onefeng/onefeng.github.io" target="_blank" aria-label="view source code"> <span class="mega-octicon octicon-mark-github" title="GitHub"></span> </a><ul class="site-footer-links mobile-hidden"><li> <a href="https://onefeng.github.io/" title="首页" target="">首页</a></li><li> <a href="https://onefeng.github.io/tags/" title="标签" target="">标签</a></li><li> <a href="https://onefeng.github.io/categories/" title="分类" target="">分类</a></li><li> <a href="https://onefeng.github.io/archives/" title="归档" target="">归档</a></li><li> <a href="https://onefeng.github.io/wiki/" title="维基" target="">维基</a></li><li> <a href="https://onefeng.github.io/about/" title="关于" target="">关于</a></li><li><a href="https://onefeng.github.io/feed.xml"><span class="octicon octicon-rss" style="color:orange;"></span></a></li></ul></div></footer><div class="tools-wrapper"> <a class="gotop" href="#" title="回到顶部"><span class="octicon octicon-arrow-up"></span></a></div><script src="https://onefeng.github.io/assets/js/geopattern.js"></script> <script> jQuery(document).ready(function($) { $('.geopattern').each(function(){ $(this).geopattern($(this).data('pattern-id')); }); /* hljs.initHighlightingOnLoad(); */ }); </script> <script src="https://cdn.jsdelivr.net/npm/jquery/dist/jquery.min.js"></script> <script src="https://cdn.jsdelivr.net/npm/fancybox/dist/js/jquery.fancybox.cjs.min.js"></script> <script> $(document).ready(function() { $("p img").each(function() { var strA = "<a data-fancybox='gallery' ref='gallery1' href='" + this.src + "'></a>"; $(this).wrapAll(strA); }); $('[data-fancybox="gallery"]').fancybox(); }); </script></body></html>
