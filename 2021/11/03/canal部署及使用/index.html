<!DOCTYPE html><html lang="zh-cmn-Hans" prefix="og: http://ogp.me/ns#" class="han-init"><head><meta charset="utf-8"><meta http-equiv="X-UA-Compatible" content="IE=edge"><meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=1" /><title>canal部署及同步到es &mdash; 晚风</title><link rel="stylesheet" href="https://onefeng.github.io/assets/vendor/primer-css/css/primer.css"><link rel="stylesheet" href="https://onefeng.github.io/assets/css/components/collection.css"><link rel="stylesheet" href="https://onefeng.github.io/assets/css/components/repo-card.css"><link rel="stylesheet" href="https://onefeng.github.io/assets/css/sections/repo-list.css"><link rel="stylesheet" href="https://onefeng.github.io/assets/css/components/boxed-group.css"><link rel="stylesheet" href="https://onefeng.github.io/assets/css/globals/common.css"><link rel="stylesheet" href="https://onefeng.github.io/assets/css/globals/responsive.css"><link rel="stylesheet" href="https://onefeng.github.io/assets/css/posts/index.css"><link rel="stylesheet" href="https://onefeng.github.io/assets/vendor/octicons/octicons/octicons.css"><link rel="stylesheet" href="https://onefeng.github.io/assets/css/globals/github.css"><link rel="canonical" href="https://onefeng.github.io/2021/11/03/canal%E9%83%A8%E7%BD%B2%E5%8F%8A%E4%BD%BF%E7%94%A8/"><link rel="alternate" type="application/atom+xml" title="晚风" href="https://onefeng.github.io/feed.xml"><link rel="shortcut icon" href="https://onefeng.github.io/favicon.ico"><meta property="og:title" content="canal部署及同步到es"><meta name="keywords" content="docker,canal"><meta name="og:keywords" content="docker,canal"><meta name="description" content="本文主要是说明canal的部署和同步数据到es中"><meta name="og:description" content="本文主要是说明canal的部署和同步数据到es中"><meta property="og:url" content="https://onefeng.github.io/2021/11/03/canal%E9%83%A8%E7%BD%B2%E5%8F%8A%E4%BD%BF%E7%94%A8/"><meta property="og:site_name" content="晚风"><meta property="og:type" content="article"><meta property="og:locale" content="zh_CN" /><meta property="article:published_time" content="2021-11-03"> <script src="https://onefeng.github.io/assets/vendor/jquery/dist/jquery.min.js"></script> <script src="https://onefeng.github.io/assets/js/jquery-ui.js"></script> <script src="https://onefeng.github.io/assets/js/main.js"></script></head><body class="" data-mz=""><header class="site-header"><div class="container"><h1><a href="https://onefeng.github.io/" title="晚风"><span class="octicon octicon-mark-github"></span> 晚风</a></h1><button class="collapsed mobile-visible" type="button" onclick="toggleMenu();"> <span class="icon-bar"></span> <span class="icon-bar"></span> <span class="icon-bar"></span> </button><nav class="site-header-nav" role="navigation"> <a href="https://onefeng.github.io/" class=" site-header-nav-item" target="" title="首页">首页</a> <a href="https://onefeng.github.io/tags/" class=" site-header-nav-item" target="" title="标签">标签</a> <a href="https://onefeng.github.io/categories/" class=" site-header-nav-item" target="" title="分类">分类</a> <a href="https://onefeng.github.io/archives/" class=" site-header-nav-item" target="" title="归档">归档</a> <a href="https://onefeng.github.io/wiki/" class=" site-header-nav-item" target="" title="维基">维基</a> <a href="https://onefeng.github.io/about/" class=" site-header-nav-item" target="" title="关于">关于</a></nav></div><link href="https://cdn.jsdelivr.net/npm/fancybox/dist/css/jquery.fancybox.css" rel="stylesheets" /></header><section class="collection-head small geopattern" data-pattern-id="canal部署及同步到es"><div class="container"><div class="columns"><div class="column three-fourths"><div class="collection-title"><h1 class="collection-header">canal部署及同步到es</h1><div class="collection-info"> <span class="meta-info"> <span class="octicon octicon-calendar"></span> 2021/11/03 </span> <span class="meta-info"> <span class="octicon octicon-file-directory"></span> <a href="https://onefeng.github.io/tags/#canal" title="canal">canal</a> </span> <span class="meta-info"> <span class="octicon octicon-file-directory"></span> <a href="https://onefeng.github.io/tags/#es" title="es">es</a> </span> <span class="meta-info"> <span class="octicon octicon-clock"></span> 共 5570 字，约 16 分钟 </span></div></div></div></div></div></section><section class="container content"><div class="columns"><div class="column three-fourths" ><article class="article-content markdown-body"><p>本文主要是说明canal的部署和同步数据到es中</p><h2 id="环境准备">环境准备</h2><p>这里需要将环境部署成以下的版本</p><p>版本</p><ul><li>canal-server 1.1.15</li><li>canal-adapter 1.1.15</li><li>mysql 5.7</li><li>es 7.10.1</li><li>kibana 7.10.1</li></ul><p>开启mysql binlog，这里自行搜索一下怎么修改mysql配置</p><div class="language-shell highlighter-rouge"><div class="highlight"><pre class="highlight"><code>show variables like <span class="s1">'log_bin'</span><span class="p">;</span>
</code></pre></div></div><p>显示log_bin的值为ON则已经开启</p><p>建从库权限的账号参考语句</p><div class="language-shell highlighter-rouge"><div class="highlight"><pre class="highlight"><code>CREATE USER canal IDENTIFIED BY <span class="s1">'123456'</span><span class="p">;</span>  
GRANT SELECT, REPLICATION SLAVE, REPLICATION CLIENT ON <span class="k">*</span>.<span class="k">*</span> TO <span class="s1">'canal'</span>@<span class="s1">'%'</span><span class="p">;</span>
FLUSH PRIVILEGES<span class="p">;</span>
</code></pre></div></div><p>创建库/表</p><div class="language-shell highlighter-rouge"><div class="highlight"><pre class="highlight"><code>CREATE DATABASE gordon_db CHARACTER SET <span class="o">=</span> utf8 COLLATE <span class="o">=</span> utf8_unicode_ci<span class="p">;</span>
use gordon_db<span class="p">;</span>
CREATE TABLE <span class="sb">`</span>dw_dim_mohurd_apt<span class="sb">`</span> <span class="o">(</span>
  <span class="sb">`</span><span class="nb">id</span><span class="sb">`</span> int<span class="o">(</span>10<span class="o">)</span>,
  <span class="sb">`</span>certno<span class="sb">`</span> varchar<span class="o">(</span>32<span class="o">)</span>,
  <span class="sb">`</span>name<span class="sb">`</span> varchar<span class="o">(</span>128<span class="o">)</span>
<span class="o">)</span><span class="p">;</span>

</code></pre></div></div><p>在kibana Dev Tools中执行</p><div class="language-shell highlighter-rouge"><div class="highlight"><pre class="highlight"><code>PUT mohurd_apt
<span class="o">{</span>
   <span class="s2">"mappings"</span> : <span class="o">{</span>
      <span class="s2">"properties"</span> : <span class="o">{</span>
        <span class="s2">"certno"</span> : <span class="o">{</span>
          <span class="s2">"type"</span> : <span class="s2">"text"</span>,
          <span class="s2">"fields"</span> : <span class="o">{</span>
            <span class="s2">"keyword"</span> : <span class="o">{</span>
              <span class="s2">"type"</span> : <span class="s2">"keyword"</span>,
              <span class="s2">"ignore_above"</span> : 256
            <span class="o">}</span>
          <span class="o">}</span>
        <span class="o">}</span>,
        <span class="s2">"id"</span> : <span class="o">{</span>
          <span class="s2">"type"</span> : <span class="s2">"long"</span>
        <span class="o">}</span>,
        <span class="s2">"name"</span> : <span class="o">{</span>
          <span class="s2">"type"</span> : <span class="s2">"text"</span>,
          <span class="s2">"fields"</span> : <span class="o">{</span>
            <span class="s2">"keyword"</span> : <span class="o">{</span>
              <span class="s2">"type"</span> : <span class="s2">"keyword"</span>,
              <span class="s2">"ignore_above"</span> : 256
            <span class="o">}</span>
          <span class="o">}</span>
        <span class="o">}</span>
      <span class="o">}</span>
    <span class="o">}</span>
<span class="o">}</span>
</code></pre></div></div><h2 id="安装">安装</h2><h3 id="canal-server">canal-server</h3><p>依次执行以下命令下载，解压和修改配置文件</p><div class="language-shell highlighter-rouge"><div class="highlight"><pre class="highlight"><code>wget https://hub.fastgit.org/alibaba/canal/releases/download/canal-1.1.5/canal.deployer-1.1.5.tar.gz
</code></pre></div></div><div class="language-shell highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="nb">tar</span> <span class="nt">-zxvf</span> canal.deployer-1.1.5.tar.gz <span class="nt">-C</span> /app/canal-server
</code></pre></div></div><div class="language-shell highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="nb">cd</span> /app/canal-server
</code></pre></div></div><p>修改conf/example/instance.properties</p><div class="language-properties highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="c">#################################################
## mysql serverId , v1.0.26+ will autoGen
# canal.instance.mysql.slaveId=0
</span>
<span class="c"># enable gtid use true/false
</span><span class="py">canal.instance.gtidon</span><span class="p">=</span><span class="s">false</span>

<span class="c"># position info
</span><span class="py">canal.instance.master.address</span><span class="p">=</span><span class="s">192.168.11.60:3306  #修改数据库ip端口</span>
<span class="py">canal.instance.master.journal.name</span><span class="p">=</span>
<span class="py">canal.instance.master.position</span><span class="p">=</span>
<span class="py">canal.instance.master.timestamp</span><span class="p">=</span>
<span class="py">canal.instance.master.gtid</span><span class="p">=</span>

<span class="c"># rds oss binlog
</span><span class="py">canal.instance.rds.accesskey</span><span class="p">=</span>
<span class="py">canal.instance.rds.secretkey</span><span class="p">=</span>
<span class="py">canal.instance.rds.instanceId</span><span class="p">=</span>

<span class="c"># table meta tsdb info
</span><span class="py">canal.instance.tsdb.enable</span><span class="p">=</span><span class="s">true</span>
<span class="c">#canal.instance.tsdb.url=jdbc:mysql://127.0.0.1:3306/canal_tsdb
#canal.instance.tsdb.dbUsername=canal
#canal.instance.tsdb.dbPassword=canal
</span>
<span class="c">#canal.instance.standby.address =
#canal.instance.standby.journal.name =
#canal.instance.standby.position =
#canal.instance.standby.timestamp =
#canal.instance.standby.gtid=
</span>
<span class="c"># username/password
</span><span class="py">canal.instance.dbUsername</span><span class="p">=</span><span class="s">canal</span>
<span class="py">canal.instance.dbPassword</span><span class="p">=</span><span class="s">123456</span>
<span class="py">canal.instance.connectionCharset</span> <span class="p">=</span> <span class="s">UTF-8</span>
<span class="c"># enable druid Decrypt database password
</span><span class="py">canal.instance.enableDruid</span><span class="p">=</span><span class="s">false</span>
<span class="c">#canal.instance.pwdPublicKey=MFwwDQYJKoZIhvcNAQEBBQADSwAwSAJBALK4BUxdDltRRE5/zXpVEVPUgunvscYFtEip3pmLlhrWpacX7y7GCMo2/JM6LeHmiiNdH1FWgGCpUfircSwlWKUCAwEAAQ==
</span>
<span class="c"># table regex
</span><span class="py">canal.instance.filter.regex</span><span class="p">=</span><span class="s">.</span><span class="se">\\</span><span class="s">..*</span>
<span class="c"># table black regex
</span><span class="py">canal.instance.filter.black.regex</span><span class="p">=</span><span class="s">mysql</span><span class="se">\\</span><span class="s">.slave_.*</span>
<span class="c"># table field filter(format: schema1.tableName1:field1/field2,schema2.tableName2:field1/field2)
#canal.instance.filter.field=test1.t_product:id/subject/keywords,test2.t_company:id/name/contact/ch
# table field black filter(format: schema1.tableName1:field1/field2,schema2.tableName2:field1/field2)
#canal.instance.filter.black.field=test1.t_product:subject/product_image,test2.t_company:id/name/contact/ch
</span>
<span class="c"># mq config
</span><span class="py">canal.mq.topic</span><span class="p">=</span><span class="s">example</span>
<span class="c"># dynamic topic route by schema or table regex
#canal.mq.dynamicTopic=mytest1.user,mytest2\\..*,.*\\..*
</span><span class="py">canal.mq.partition</span><span class="p">=</span><span class="s">0</span>
<span class="c"># hash partition config
#canal.mq.partitionsNum=3
#canal.mq.partitionHash=test.table:id^name,.*\\..*
#canal.mq.dynamicTopicPartitionNum=test.*:4,mycanal:6
#################################################
</span>
</code></pre></div></div><p>启动canal-server</p><div class="language-shell highlighter-rouge"><div class="highlight"><pre class="highlight"><code>sh bin/startup.sh
</code></pre></div></div><h3 id="canal-adapter">canal-adapter</h3><p>依次运行下面命令</p><div class="language-shell highlighter-rouge"><div class="highlight"><pre class="highlight"><code>wget https://hub.fastgit.org/alibaba/canal/releases/download/canal-1.1.5/canal.adapter-1.1.5.tar.gz
</code></pre></div></div><div class="language-shell highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="nb">tar</span> <span class="nt">-zxvf</span> canal.adapter-1.1.5.tar.gz <span class="nt">-C</span> /app/canal-adapter
</code></pre></div></div><div class="language-shell highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="nb">cd</span> /app/canal-adapter
</code></pre></div></div><p>修改配置conf/application.yml</p><div class="language-yaml highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="na">server</span><span class="pi">:</span>
  <span class="na">port</span><span class="pi">:</span> <span class="m">8081</span>
<span class="na">spring</span><span class="pi">:</span>
  <span class="na">jackson</span><span class="pi">:</span>
    <span class="na">date-format</span><span class="pi">:</span> <span class="s">yyyy-MM-dd HH:mm:ss</span>
    <span class="na">time-zone</span><span class="pi">:</span> <span class="s">GMT+8</span>
    <span class="na">default-property-inclusion</span><span class="pi">:</span> <span class="s">non_null</span>

<span class="s">canal.conf</span><span class="pi">:</span>
  <span class="na">mode</span><span class="pi">:</span> <span class="s">tcp</span> <span class="c1">#tcp kafka rocketMQ rabbitMQ</span>
  <span class="na">flatMessage</span><span class="pi">:</span> <span class="no">true</span>
  <span class="na">zookeeperHosts</span><span class="pi">:</span>
  <span class="na">syncBatchSize</span><span class="pi">:</span> <span class="m">1000</span>
  <span class="na">retries</span><span class="pi">:</span> <span class="m">0</span>
  <span class="na">timeout</span><span class="pi">:</span>
  <span class="na">accessKey</span><span class="pi">:</span>
  <span class="na">secretKey</span><span class="pi">:</span>
  <span class="na">consumerProperties</span><span class="pi">:</span>
    <span class="c1"># canal tcp consumer</span>
    <span class="s">canal.tcp.server.host</span><span class="pi">:</span> <span class="s">192.168.11.30:11111</span>
    <span class="s">canal.tcp.zookeeper.hosts</span><span class="pi">:</span>
    <span class="s">canal.tcp.batch.size</span><span class="pi">:</span> <span class="m">500</span>
    <span class="s">canal.tcp.username</span><span class="pi">:</span>
    <span class="s">canal.tcp.password</span><span class="pi">:</span>
    <span class="c1"># kafka consumer</span>
    <span class="s">kafka.bootstrap.servers</span><span class="pi">:</span> <span class="s">127.0.0.1:9092</span>
    <span class="s">kafka.enable.auto.commit</span><span class="pi">:</span> <span class="no">false</span>
    <span class="s">kafka.auto.commit.interval.ms</span><span class="pi">:</span> <span class="m">1000</span>
    <span class="s">kafka.auto.offset.reset</span><span class="pi">:</span> <span class="s">latest</span>
    <span class="s">kafka.request.timeout.ms</span><span class="pi">:</span> <span class="m">40000</span>
    <span class="s">kafka.session.timeout.ms</span><span class="pi">:</span> <span class="m">30000</span>
    <span class="s">kafka.isolation.level</span><span class="pi">:</span> <span class="s">read_committed</span>
    <span class="s">kafka.max.poll.records</span><span class="pi">:</span> <span class="m">1000</span>
    <span class="c1"># rocketMQ consumer</span>
    <span class="s">rocketmq.namespace</span><span class="pi">:</span>
    <span class="s">rocketmq.namesrv.addr</span><span class="pi">:</span> <span class="s">127.0.0.1:9876</span>
    <span class="s">rocketmq.batch.size</span><span class="pi">:</span> <span class="m">1000</span>
    <span class="s">rocketmq.enable.message.trace</span><span class="pi">:</span> <span class="no">false</span>
    <span class="s">rocketmq.customized.trace.topic</span><span class="pi">:</span>
    <span class="s">rocketmq.access.channel</span><span class="pi">:</span>
    <span class="s">rocketmq.subscribe.filter</span><span class="pi">:</span>
    <span class="c1"># rabbitMQ consumer</span>
    <span class="s">rabbitmq.host</span><span class="pi">:</span>
    <span class="s">rabbitmq.virtual.host</span><span class="pi">:</span>
    <span class="s">rabbitmq.username</span><span class="pi">:</span>
    <span class="s">rabbitmq.password</span><span class="pi">:</span>
    <span class="s">rabbitmq.resource.ownerId</span><span class="pi">:</span>

<span class="c1">#  srcDataSources:</span>
<span class="c1">#    defaultDS:</span>
<span class="c1">#      url: jdbc:mysql://127.0.0.1:3306/mytest?useUnicode=true</span>
<span class="c1">#      username: root</span>
<span class="c1">#      password: 121212</span>
  <span class="na">srcDataSources</span><span class="pi">:</span>
    <span class="na">defaultDS</span><span class="pi">:</span>
      <span class="na">url</span><span class="pi">:</span> <span class="s">jdbc:mysql://192.168.11.60:3306/comp?useUnicode=true</span>
      <span class="na">username</span><span class="pi">:</span> <span class="s">canal</span>
      <span class="na">password</span><span class="pi">:</span> <span class="m">123456</span>
      <span class="na">maxActive</span><span class="pi">:</span> <span class="m">20</span>
  <span class="na">canalAdapters</span><span class="pi">:</span>
  <span class="pi">-</span> <span class="na">instance</span><span class="pi">:</span> <span class="s">example</span> <span class="c1"># canal instance Name or mq topic name</span>
    <span class="na">groups</span><span class="pi">:</span>
    <span class="pi">-</span> <span class="na">groupId</span><span class="pi">:</span> <span class="s">g1</span>
      <span class="na">outerAdapters</span><span class="pi">:</span>
      <span class="pi">-</span> <span class="na">name</span><span class="pi">:</span> <span class="s">es7</span>
        <span class="na">key</span><span class="pi">:</span> <span class="s">eskey</span> <span class="c1">#这里是全量导入时的taskid</span>
        <span class="na">hosts</span><span class="pi">:</span> <span class="s">192.168.11.73:9200</span>
        <span class="na">properties</span><span class="pi">:</span>
          <span class="na">mode</span><span class="pi">:</span> <span class="s">rest</span> <span class="c1"># restful 模式</span>
          <span class="s">cluster.name</span><span class="pi">:</span> <span class="s">elasticsearch-cluster</span> <span class="c1"># 集群名字</span>

</code></pre></div></div><p>修改 conf/es7/mohurd_apt.yml</p><div class="language-yaml highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="na">dataSourceKey</span><span class="pi">:</span> <span class="s">defaultDS</span> <span class="c1">#和上面canal.conf.srcDataSources.defaultDS要一样</span>
<span class="na">outerAdapterKey</span><span class="pi">:</span> <span class="s">eskey</span> <span class="c1">#和上面canal.conf.canalAdapters.instance.groups.outerAdapters.key要一样</span>
<span class="na">destination</span><span class="pi">:</span> <span class="s">example</span> <span class="c1">#和上面canal.conf.canalAdapters.instance要一样</span>
<span class="na">groupId</span><span class="pi">:</span> <span class="s">g1</span>
<span class="na">esMapping</span><span class="pi">:</span>
  <span class="na">_index</span><span class="pi">:</span> <span class="s">mohurd_apt</span> <span class="c1">#索引名称</span>
  <span class="na">_id</span><span class="pi">:</span> <span class="s">_id</span>
  <span class="na">sql</span><span class="pi">:</span> <span class="s2">"</span><span class="s">select</span><span class="nv"> </span><span class="s">id</span><span class="nv"> </span><span class="s">as</span><span class="nv"> </span><span class="s">_id,id,certno,name</span>
        <span class="s">from</span><span class="nv"> </span><span class="s">dw_dim_mohurd_apt</span>
       <span class="s">"</span> <span class="c1"># 查询的sql返回的结构和es的filed对应</span>
  <span class="na">commitBatch</span><span class="pi">:</span> <span class="m">3000</span>

</code></pre></div></div><p>启动 /bin/startup.sh</p><p>全量同步</p><div class="language-shell highlighter-rouge"><div class="highlight"><pre class="highlight"><code>curl http://192.168.10.69:8081/etl/es7/eskey/mohurd_apt.yml <span class="nt">-X</span> POST
</code></pre></div></div><h3 id="使用docker部署canal-servercanal-adapter">使用docker部署canal-server,canal-adapter</h3><div class="language-shell highlighter-rouge"><div class="highlight"><pre class="highlight"><code>docker run <span class="nt">--name</span> canal-server <span class="nt">-p</span> 11111:11111 <span class="nt">-m</span> 1024m
<span class="nt">-v</span> /opt/docker/canal-server/conf:/home/admin/canal-server/conf
<span class="nt">-v</span> /opt/docker/canal-server/logs:/home/admin/canal-server/logs
<span class="nt">-d</span> canal/canal-server:v1.1.5
</code></pre></div></div><div class="language-shell highlighter-rouge"><div class="highlight"><pre class="highlight"><code>docker run <span class="nt">--name</span> canal-adapter <span class="nt">-p</span> 8081:8081 <span class="nt">-v</span> /opt/docker/canal-adapter/conf:/opt/canal-adapter/conf <span class="nt">-v</span> /opt/docker/canal-adapter/logs:/opt/canal-adapter/logs  <span class="nt">-d</span> slpcat/canal-adapter:v1.1.5
</code></pre></div></div><p>然后对应修改宿主文件下的conf。</p><div style="margin-top:2em;padding:0 1.5em;border:1px solid #d3d3d3;background-color:#deebf7"><h3>文档信息</h3><ul><li>本文作者：<a href="https://onefeng.github.io" target="_blank">onefeng</a></li><li>本文链接：<a href="https://onefeng.github.io/2021/11/03/canal%E9%83%A8%E7%BD%B2%E5%8F%8A%E4%BD%BF%E7%94%A8/" target="_blank">https://onefeng.github.io/2021/11/03/canal%E9%83%A8%E7%BD%B2%E5%8F%8A%E4%BD%BF%E7%94%A8/</a></li><li>版权声明：自由转载-非商用-非衍生-保持署名（<a href="http://creativecommons.org/licenses/by-nc-nd/3.0/deed.zh" target="_blank">创意共享3.0许可证</a>）</li></ul></div></article><div class="comment"><div id="gitalk-container"></div><link rel="stylesheet" href="https://onefeng.github.io/assets/vendor/gitalk/gitalk.css"> <script src="https://cdn.jsdelivr.net/npm/gitalk@1/dist/gitalk.min.js"></script> <script> var gitalk = new Gitalk({ id: '/2021/11/03/canal%E9%83%A8%E7%BD%B2%E5%8F%8A%E4%BD', clientID: '32093df0544328cd07f4', clientSecret: '293fe7853fd4a12eb266c11cf02b775908525ce3', repo: 'onefeng.github.io', owner: 'onefeng', admin: ['onefeng'], labels: ['gitment'], perPage: 50, }); gitalk.render('gitalk-container'); </script></div></div><div class="column one-fourth"><h3>搜索</h3><div id="site_search"> <input style="width:96%" type="text" id="search_box" placeholder=""></div><ul id="search_results" style="font-size:14px;list-style-type:none;padding-top:10px;padding-left:10px;"></ul><script src="https://onefeng.github.io/assets/js/simple-jekyll-search.min.js"></script> <script type="text/javascript"> SimpleJekyllSearch({ searchInput: document.getElementById('search_box'), resultsContainer: document.getElementById('search_results'), json: '/assets/search_data.json?v=1669371438', searchResultTemplate: '<li><a href="{url}" title="{title}">{title}</a></li>', noResultsText: '没有搜索到...', limit: 10, fuzzy: false, exclude: ['Welcome'] }) </script><h3 class="post-directory-title mobile-hidden">内容</h3><div id="post-directory-module" class="mobile-hidden"><section class="post-directory"><dl></dl></section></div><script src="https://onefeng.github.io/assets/js/jquery.toc.js"></script></div></div></section><footer class="container"><div class="site-footer" role="contentinfo"><div class="copyright left mobile-block"> © 2020 <span title="onefeng">onefeng</span> <a href="javascript:window.scrollTo(0,0)" class="right mobile-visible">TOP</a></div><ul class="site-footer-links right mobile-hidden"><li> <a href="javascript:window.scrollTo(0,0)" >TOP</a></li></ul><a href="https://github.com/onefeng/onefeng.github.io" target="_blank" aria-label="view source code"> <span class="mega-octicon octicon-mark-github" title="GitHub"></span> </a><ul class="site-footer-links mobile-hidden"><li> <a href="https://onefeng.github.io/" title="首页" target="">首页</a></li><li> <a href="https://onefeng.github.io/tags/" title="标签" target="">标签</a></li><li> <a href="https://onefeng.github.io/categories/" title="分类" target="">分类</a></li><li> <a href="https://onefeng.github.io/archives/" title="归档" target="">归档</a></li><li> <a href="https://onefeng.github.io/wiki/" title="维基" target="">维基</a></li><li> <a href="https://onefeng.github.io/about/" title="关于" target="">关于</a></li><li><a href="https://onefeng.github.io/feed.xml"><span class="octicon octicon-rss" style="color:orange;"></span></a></li></ul></div></footer><div class="tools-wrapper"> <a class="gotop" href="#" title="回到顶部"><span class="octicon octicon-arrow-up"></span></a></div><script src="https://onefeng.github.io/assets/js/geopattern.js"></script> <script> jQuery(document).ready(function($) { $('.geopattern').each(function(){ $(this).geopattern($(this).data('pattern-id')); }); /* hljs.initHighlightingOnLoad(); */ }); </script> <script src="https://cdn.jsdelivr.net/npm/jquery/dist/jquery.min.js"></script> <script src="https://cdn.jsdelivr.net/npm/fancybox/dist/js/jquery.fancybox.cjs.min.js"></script> <script> $(document).ready(function() { $("p img").each(function() { var strA = "<a data-fancybox='gallery' ref='gallery1' href='" + this.src + "'></a>"; $(this).wrapAll(strA); }); $('[data-fancybox="gallery"]').fancybox(); }); </script></body></html>
